<?xml version="1.0" encoding="utf-8" ?>
<!--日志级别以及优先级排序: OFF > FATAL > ERROR > WARN > INFO > DEBUG > TRACE > ALL -->
<!--monitorInterval：Log4j能够自动检测修改配置 文件和重新配置本身，设置间隔秒数-->
 <configuration monitorInterval="30">
    <Properties>
        <Property name="base_path">/logs</Property>
    </Properties>
    <appenders>
        <!--控制台输出日志配置-->
        <Console name="Console" target="SYSTEM_OUT">
            <ThresholdFilter level="info" onMatch="ACCEPT" onMismatch="DENY" />
            <PatternLayout pattern="%d{HH:mm:ss.SSS} %-5level %class{36} %L %M - %msg%xEx%n" />
        </Console>
        <!--文件会打印出所有信息，这个log每次运行程序会自动清空，由append属性决定，这个也挺有用的，适合临时测试用-->
        <File name="log" fileName="log/test.log" append="false">
            <PatternLayout pattern="%d{HH:mm:ss.SSS} %-5level %class{36} %L %M - %msg%xEx%n" />
        </File>
        <!-- 循环政策：基于时间创建日志文件 -->
        <RollingFile name="RollingFileInfo" fileName="logs/info.log" filePattern="logs/$${date:yyyy-MM}/info-%d{yyyy-MM-dd}-%i.log">
            <PatternLayout pattern="%d{yyyy-MM-dd 'at' HH:mm:ss z} %-5level %class{36} %L %M - %msg%xEx%n" />
            <Filters>
                <ThresholdFilter level="info" onMatch="accept" onMismatch="deny" />
                <ThresholdFilter level="warn" onMatch="deny" onMismatch="natural" />
            </Filters>
            <!--将多个TriggeringPolicy放到Policies中表示使用复合策略-->
            <Policies>
                <!--TimeBasedTriggeringPolicy规定了当日志文件名中的date/time pattern不再符合filePattern中的date/time pattern时，
                触发rollover操作
                此参数需要与filePattern结合使用，规定了触发rollover的频率，默认值为1。假设interval为4，若filePattern的date/time
                pattern的最小时间粒度为小时(如yyyy-MM-dd HH)，则每4小时触发一次rollover
                -->
                <TimeBasedTriggeringPolicy interval="1" />
                <!--size参数可以用KB、MB、GB等做后缀来指定具体的字节数-->
                <SizeBasedTriggeringPolicy size="50MB" />
            </Policies>
            <!--如果filePattern中仅含有整数计数器（即%i），每次rollover时，文件重命名时的计数器将每次加1（初始值为1），若达到max的值，
            将删除旧的文件。 如，filePattern="logs/app-%i.log"-->
            <DefaultRolloverStrategy max="3" />
        </RollingFile>
        <RollingFile name="RollingFileWarn" fileName="logs/warn.log" filePattern="/logs/$${date:yyyy-MM}/warn-%d{yyyy-MM-dd}-%i.log">
            <Filters>
                <ThresholdFilter level="warn" onMatch="accept" onMismatch="deny"/>
                <ThresholdFilter level="error" onMatch="deny" onMismatch="neutral"/>
            </Filters>
            <PatternLayout pattern="%d{yyyy-MM-dd 'at' HH:mm:ss z} %-5level %class{36} %L %M - %msg%xEx%n"/>
            <SizeBasedTriggeringPolicy size="50MB"/>
        </RollingFile>
        <RollingFile name="RollingFileError" fileName="logs/error.log" filePattern="/logs/$${date:yyyy-MM}/error-%d{yyyy-MM-dd}-%i.log">
            <Filters>
                <ThresholdFilter level="error" />
            </Filters>
            <PatternLayout pattern="%d{yyyy-MM-dd 'at' HH:mm:ss z} %-5level %class{36} %L %M - %msg%xEx%n"/>
            <SizeBasedTriggeringPolicy size="100MB"/>
        </RollingFile>
    </appenders>

    <loggers>
        <logger name="org.mybatis" level="debug"></logger>
        <root level="all">
            <appender-ref ref="RollingFileInfo" />
            <appender-ref ref="Console" />
            <appender-ref ref="RollingFileWarn"/>
            <appender-ref ref="RollingFileError"/>
        </root>
    </loggers>
 </configuration>